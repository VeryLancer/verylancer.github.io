<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lights Out</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/rocket-rinder" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
</head>
<body>

<div class="stars"></div>

<nav class="top-nav">
    <div class="nav-left">
        <a href="../index.html">
            <img src="../images/logo.png" alt="VeryLancer Logo" class="nav-logo" />
        </a>
        <a href="../index.html" style="text-decoration:none; color:inherit;">
            <span class="nav-name">VeryLancer</span>
        </a>
    </div>
</nav>

<section class="section game-page">
    <div class="game-header">
        <img src="../images/thumbnails/lights-out.png" alt="Lights Out Thumbnail" class="game-thumb">
        <div class="game-details">
            <h1>Lights Out</h1>
            <p>Lights Out is a 3D puzzle game where you explore a town, stay in the light to keep sane, and solve puzzles to escape</p>

            <div class="button-row">
                <a href="https://chxck.itch.io/lights-out" class="store-btn itch-btn">
                    <img src="../images/icons/itchio.png" alt=""> Itch.io
                </a>
            </div>
        </div>
    </div>

    <hr class="section-divider">
    
    <!-- ======= ABOUT GAME ======= -->
    <h2 class="section-title" style="margin-top:60px;">About Game</h2>

    <div class="about-game">
        <p class="desc">
            Your car just broke down near a small town. 
            To fix it, you must explore the village and gather crucial items while keeping your sanity intact. 
            Stay in the light to avoid losing your grip. Can you make it out before darkness takes over?
            <br><br> Made for Scream Jam 2024
        </p>
    </div>
</section>

<!-- ======= LIGHTBOX OVERLAY ======= -->
<div id="lightbox" class="lightbox">
    <span class="close">&times;</span>
    <img class="lightbox-img" alt="Expanded Screenshot">
    <div class="lightbox-nav">
        <span class="prev">&#10094;</span>
        <span class="next">&#10095;</span>
    </div>
</div>

<script>
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('.lightbox-img');
    const screenshots = document.querySelectorAll('.screenshots img');
    const closeBtn = lightbox.querySelector('.close');
    const prevBtn = lightbox.querySelector('.prev');
    const nextBtn = lightbox.querySelector('.next');

    let currentIndex = 0;

    function openLightbox(index) {
        currentIndex = index;
        lightbox.style.display = 'flex';
        lightboxImg.src = screenshots[index].src;
    }

    function closeLightbox() {
        lightbox.style.display = 'none';
    }

    function showNext() {
        currentIndex = (currentIndex + 1) % screenshots.length;
        lightboxImg.src = screenshots[currentIndex].src;
    }

    function showPrev() {
        currentIndex = (currentIndex - 1 + screenshots.length) % screenshots.length;
        lightboxImg.src = screenshots[currentIndex].src;
    }

    screenshots.forEach((img, i) => {
        img.addEventListener('click', () => openLightbox(i));
    });

    closeBtn.addEventListener('click', closeLightbox);
    nextBtn.addEventListener('click', showNext);
    prevBtn.addEventListener('click', showPrev);

    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
    });

    document.addEventListener('keydown', (e) => {
        if (lightbox.style.display === 'flex') {
            if (e.key === 'ArrowRight') showNext();
            if (e.key === 'ArrowLeft') showPrev();
            if (e.key === 'Escape') closeLightbox();
        }
    });
</script>

</body>
</html>
